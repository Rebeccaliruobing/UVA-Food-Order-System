
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>UvaFood&mdash; </title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Uva Food Order System" />
	<meta name="keywords" content="food order" />
	<meta name="author" content="Ruobing Li" />

  

  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="favicon.ico">

	<link href='https://fonts.googleapis.com/css?family=Playfair+Display:400,700,400italic,700italic|Merriweather:300,400italic,300italic,400,700italic' rel='stylesheet' type='text/css'>
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Simple Line Icons -->
	<link rel="stylesheet" href="css/simple-line-icons.css">
	<!-- Datetimepicker -->
	<link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css">
	<!-- Flexslider -->
	<link rel="stylesheet" href="css/flexslider.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<link rel="stylesheet" href="css/style.css">
	
	<link rel="stylesheet" href="css/login.css">


	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	</head>
	<body>

	<div id="fh5co-container">
		<div id="fh5co-home" class="js-fullheight" data-section="home">

			<div class="flexslider">
				
				<div class="fh5co-overlay"></div>
				<div class="fh5co-text">
					<div class="container">
						<div class="row">
							<h1 class="to-animate">UvaFood</h1>
							<h2 class="to-animate">Designed <span>by</span> Ruobing Li</h2>

								<button id="btnlogin" value="d" onclick="document.getElementById('id01').style.display='block'" style="width:auto;" >Login</button>
								<button id="btnregister" value="d" onclick="document.getElementById('id02').style.display='block'" style="width:auto;">Register</button>
								<p id="guestinfo"></p>
						</div>
					</div>
				</div>
			  	<ul class="slides">
			   	<li style="background-image: url(images/slide_1.jpg);" data-stellar-background-ratio="0.5"></li>
			   	<li style="background-image: url(images/slide_2.jpg);" data-stellar-background-ratio="0.5"></li>
			   	<li style="background-image: url(images/slide_3.jpg);" data-stellar-background-ratio="0.5"></li>
			  	</ul>

			</div>
			
		</div>
		<div id="id02" class="modal">

			<div class="modal-content animate" action="index.html" method="post">
				<div class="imgcontainer">
				<!-- Click on "x"，hide the frame-->
					<span onclick="document.getElementById('id02').style.display='none'" class="close" title="Close Modal">&times;</span>
				</div>

				<div class="container">
					<label><b>Username</b></label>
					<input type="text" placeholder="Enter Username" name="uname" required id="newuser">

					<label><b>Password</b></label>
					<input type="password" placeholder="Enter Password" name="psw" id="pwd1" required>
					
					<label><b>Password Again</b></label>
					<input type="password" placeholder="Enter Password Again" name="psw" id="pwd2" >
					<span id="alert"></span></input>
					<button type="button" id="register" onclick="checkandregister()" required>Register</button>
				</div>

				<div class="container" style="background-color:#f1f1f1">
					<!-- Click on "Cancle" hide the frame-->
					<button type="button" onclick="document.getElementById('id02').style.display='none'" class="cancelbtn">Cancel</button>
				</div>
			</div>
		</div>
		<div id="id01" class="modal">

			<div class="modal-content animate" action="index.html" method="post">
				<div class="imgcontainer">
				<!-- Click on "Cancle" hide the frame-->
					<span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
				</div>

				<div class="container">
					<label><b>Username</b></label>
					<input type="text" placeholder="Enter Username" name="uname" id="uname" required>

					<label><b>Password</b></label>
					<input type="password" placeholder="Enter Password" name="psw" id="psw" required>

					<input type="button" id="submit" onclick="val();" value="LOGIN"></button>
					<input type="checkbox" checked="checked"> Remember Me
				</div>

				<div class="container" style="background-color:#f1f1f1">
					<!-- Click on "Cancle" hide the frame-->
					<button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
					<span class="psw">Forgot <a href="#">password?</a></span>
				</div>
			</div>
		</div>
		<div class="js-sticky">
			<div class="fh5co-main-nav">
				<div class="container-fluid">
					<div class="fh5co-menu-1">
						<a href="#" data-nav-section="home">Home</a>
						<a href="#" data-nav-section="about">About</a>
						<!--<a href="#" data-nav-section="features">Features</a>-->
					</div>
					<div class="fh5co-logo">
						<a href="index.html">UvaFood</a>
					</div>
					<div class="fh5co-menu-2" id="menu-2">
						<a href="#" data-nav-section="menu">Menu</a>
						<!--<a href="#" data-nav-section="reservation" style="display:inline">Reservation</a>-->

					</div>
				</div>
				
			</div>
		</div>

		<div id="fh5co-about" data-section="about">
			<div class="fh5co-2col fh5co-bg to-animate-2" style="background-image: url(images/res_img_1.jpg)"></div>
			<div class="fh5co-2col fh5co-text">
				<h2 class="heading to-animate">About Us</h2>
				<p class="to-animate">Uva Food Order System</p>
				<p class="text-center to-animate"><a href="#" class="btn btn-primary btn-outline">Get in touch</a></p>
			</div>
		</div>

		<div id="fh5co-sayings">
			<div class="container">
				<div class="row to-animate">

					<div class="flexslider">
						<ul class="slides">
							
							<li>
								<blockquote>
									<p>&ldquo;Cooking is an art, but all art requires knowing something about the techniques and materials&rdquo;</p>
									<p class="quote-author">&mdash; Nathan Myhrvold</p>
								</blockquote>
							</li>
							<li>
								<blockquote>
									<p>&ldquo;Give a man food, and he can eat for a day. Give a man a job, and he can only eat for 30 minutes on break.&rdquo;</p>
									<p class="quote-author">&mdash; Lev L. Spiro</p>
								</blockquote>
							</li>
							<li>
								<blockquote>
									<p>&ldquo;Find something you’re passionate about and keep tremendously interested in it.&rdquo;</p>
									<p class="quote-author">&mdash; Julia Child</p>
								</blockquote>
							</li>
							<li>
								<blockquote>
									<p>&ldquo;Never work before breakfast; if you have to work before breakfast, eat your breakfast first.&rdquo;</p>
									<p class="quote-author">&mdash; Josh Billings</p>
								</blockquote>
							</li>
							
							
						</ul>
					</div>

				</div>
			</div>
		</div>

		<div id="fh5co-menus" data-section="menu">
			<div class="container">
				<div class="row text-center fh5co-heading row-padded">
					<div class="col-md-8 col-md-offset-2">
						<h2 class="heading to-animate">Food Menu</h2>
					</div>
				</div>
				<div class="row row-padded">
					<div class="col-md-6">
						<div class="fh5co-food-menu to-animate-2">
							<h2 class="fh5co-drinks">Drinks</h2>
							<ul>
								<li>
									<div class="fh5co-food-desc">
										<figure>
											<img src="images/res_img_5.jpg" class="img-responsive" alt="Free HTML5 Templates by FREEHTML5.co">
										</figure>
										<div>
											<h3>Pineapple Juice</h3>
										</div>
									</div>
									<div class="fh5co-food-pricing">
										$17.50
									</div>
									<div class="fh5co-food-pricing">
										<i class="icon-plus" onclick="ch_num_f(0,0)" style="float:right; margin-left: 10px; margin-top: 10px" ></i>
										<p id="f0" style="float:right; margin-left: 20px">0</p>
										<i class="icon-minus" onclick="ch_num_f(0,1)" style="float:right; margin-left: 20px; margin-top: 10px"></i>
									<div>
								</li>
								<li>
									<div class="fh5co-food-desc">
										<figure>
											<img src="images/res_img_6.jpg" class="img-responsive" alt="Free HTML5 Templates by FREEHTML5.co">
										</figure>
										<div>
											<h3>Green Juice</h3>
										</div>
									</div>
									<div class="fh5co-food-pricing">
										$7.99
									</div>
									<div class="fh5co-food-pricing">
										<i class="icon-plus" onclick="ch_num_f(1,0)" style="float:right; margin-left: 10px; margin-top: 10px"></i>
										<p id="f1" style="float:right; margin-left: 20px">0</p>
										<i class="icon-minus" onclick="ch_num_f(1,1)" style="float:right; margin-left: 20px; margin-top: 10px"></i>
									<div>
								</li>
								<li>
									<div class="fh5co-food-desc">
										<figure>
											<img src="images/res_img_7.jpg" class="img-responsive" alt="Free HTML5 Templates by FREEHTML5.co">
										</figure>
										<div>
											<h3>Soft Drinks</h3>
										</div>
									</div>
									<div class="fh5co-food-pricing">
										$12.99
									</div>
									<div class="fh5co-food-pricing">
										<i class="icon-plus" onclick="ch_num_f(2,0)" style="float:right; margin-left: 10px; margin-top: 10px"></i>
										<p id="f2" style="float:right; margin-left: 20px">0</p>
										<i class="icon-minus" onclick="ch_num_f(2,1)" style="float:right; margin-left: 20px; margin-top: 10px"></i>
									<div>
								</li>
								<li>
									<div class="fh5co-food-desc">
										<figure>
											<img src="images/res_img_5.jpg" class="img-responsive" alt="Free HTML5 Templates by FREEHTML5.co">
										</figure>
										<div>
											<h3>Carlo Rosee Drinks</h3>
										</div>
									</div>
									<div class="fh5co-food-pricing">
										$12.99
									</div>
									<div class="fh5co-food-pricing">
										<i class="icon-plus" onclick="ch_num_f(3,0)" style="float:right; margin-left: 10px; margin-top: 10px"></i>
										<p id="f3" style="float:right; margin-left: 20px">0</p>
										<i class="icon-minus" onclick="ch_num_f(3,1)" style="float:right; margin-left: 20px; margin-top: 10px"></i>
									<div>
								</li>
							</ul>
						</div>
					</div>
					<div class="col-md-6">
						<div class="fh5co-food-menu to-animate-2">
							<h2 class="fh5co-dishes">Food</h2>
							<ul>
								<li>
									<div class="fh5co-food-desc">
										<figure>
											<img src="images/res_img_3.jpg" class="img-responsive" alt="Free HTML5 Templates by FREEHTML5.co">
										</figure>
										<div>
											<h3>Beef Steak</h3>
										</div>
									</div>
									<div class="fh5co-food-pricing">
										$17.50
									</div>
									<div class="fh5co-food-pricing">
										<i class="icon-plus" onclick="ch_num_f(4,0)" style="float:right; margin-left: 10px; margin-top: 10px"></i>
										<p id="f4" style="float:right; margin-left: 20px">0</p>
										<i class="icon-minus" onclick="ch_num_f(4,1)" style="float:right; margin-left: 20px; margin-top: 10px"></i>
									<div>
								</li>
								<li>
									<div class="fh5co-food-desc">
										<figure>
											<img src="images/res_img_4.jpg" class="img-responsive" alt="Free HTML5 Templates by FREEHTML5.co">
										</figure>
										<div>
											<h3>Tomato with Chicken</h3>
										</div>
									</div>
									<div class="fh5co-food-pricing">
										$7.99
									</div>
									<div class="fh5co-food-pricing">
										<i class="icon-plus" onclick="ch_num_f(5,0)" style="float:right; margin-left: 10px; margin-top: 10px"></i>
										<p id="f5" style="float:right; margin-left: 20px">0</p>
										<i class="icon-minus" onclick="ch_num_f(5,1)" style="float:right; margin-left: 20px; margin-top: 10px"></i>
									<div>
								</li>
								<li>
									<div class="fh5co-food-desc">
										<figure>
											<img src="images/res_img_2.jpg" class="img-responsive" alt="Free HTML5 Templates by FREEHTML5.co">
										</figure>
										<div>
											<h3>Sausages from Italy</h3>
										</div>
									</div>
									<div class="fh5co-food-pricing">
										$12.99
									</div>
									<div class="fh5co-food-pricing">
										<i class="icon-plus" onclick="ch_num_f(6,0)" style="float:right; margin-left: 10px; margin-top: 10px"></i>
										<p id="f6" style="float:right; margin-left: 20px">0</p>
										<i class="icon-minus" onclick="ch_num_f(6,1)" style="float:right; margin-left: 20px; margin-top: 10px"></i>
									<div>
								</li>
								<li>
									<div class="fh5co-food-desc">
										<figure>
											<img src="images/res_img_8.jpg" class="img-responsive" alt="Free HTML5 Templates by FREEHTML5.co">
										</figure>
										<div>
											<h3>Beef Grilled</h3>
										</div>
									</div>
									<div class="fh5co-food-pricing">
										$12.99
									</div>
									<div class="fh5co-food-pricing">
										<i class="icon-plus" onclick="ch_num_f(7,0)" style="float:right; margin-left: 10px; margin-top: 10px"></i>
										<p id="f7" style="float:right; margin-left: 20px">0</p>
										<i class="icon-minus" onclick="ch_num_f(7,1)" style="float:right; margin-left: 20px; margin-top: 10px"></i>
									<div>
								</li>
							</ul>					
							<p id="tot_price">Total price: $0</p>
							<a href = "javascript:void(0)" style="float:right" onclick = "shop_cart()">Shopping Cart</a>
						</div>
						
					</div>
				</div>
			</div>
		</div>
		<div id="spc_light" class="spc_white_content" >
			<p id="tot_price_cart">Total price: $0</p>
			<table id="mytable" class="datalist">
				<thead>
				<tr>
					<th scope="col">Food Name</th>
					<th scope="col">Quantity</th>
					<th scope="col">Price</th>
				</tr>
				<thead>
				<tbody>
					
				</tbody>
			</table>
			<a href = "javascript:void(0)" onclick = "document.getElementById('spc_light').style.display='none'">Close</a>
			<a href = "javascript:void(0)" onclick = "submit_order()" style="float:right">Submit Order</a>

		</div>
		</div>
		
		<div id="fh5co-contact" data-section="user_profile" style="visibility:hidden">
			<div class="container">
				<div class="row text-center fh5co-heading row-padded">
					<div class="col-md-8 col-md-offset-2">
						<h2 class="heading to-animate">User Profile</h2>
					</div>
				</div>
				<div class="row" >
					<div class="col-md-6 to-animate-2" id = "previous">
						<h3>Current Profile</h3>
						<ul class="fh5co-contact-info" >
							<li class="fh5co-contact-address" id = "userid">
								User ID:
							</li>
							<li id = "uaddress">Address:</li>
							<li id = "uphone">Phone:</li>
							<li id = "ucard">Card Number:</li>
							<li id = "uwallet">Wallet:</li>
							<a href = "javascript:void(0)" onclick = "updatepreorder()">Previous orders:</a>
						</ul>
					</div>
					<div class="col-md-6 to-animate-2">
						<h3>Update Profile</h3>
						<div class="form-group ">
							<label for="address" class="sr-only">Address</label>
							<input id="address" class="form-control" placeholder="Address" type="text">
						</div>
						<div class="form-group ">
							<label for="phone" class="sr-only">Phone</label>
							<input id="phone" class="form-control" placeholder="Phone" type="text">
						</div>
						<div class="form-group ">
							<label for="cardnumber" class="sr-only">Card Number</label>
							<input id="cardnumber" class="form-control" placeholder="Card Number" type="text">
						</div>
						<div class="form-group ">
							<label for="wallet" class="sr-only">Wallet</label>
							<input id="wallet" class="form-control" placeholder="Wallet" type="text">
						</div>
						<div class="form-group ">
							<!--<button class="btn btn-primary" id = "submit" type="button" onclick="updateprofile();">Update Profile
						    </button>-->
						    <button type="button" id="update" onclick="updateprofile()" required>Update Profile</button>
						</div>
						</div>
				</div>
			</div>
		</div>

		
	</div>

		<div class="container">
			<div class="row row-padded">
				<div class="col-md-12 text-center">
					<p class="to-animate">&copy; Uva Food Order System. <br> Designed by Ruobing Li Demo Images: <a href="http://pexels.com/" target="_blank">Pexels</a> <br> Tasty Icons Free <a href="http://handdrawngoods.com/store/tasty-icons-free-food-icons/" target="_blank">handdrawngoods</a>
					</p>
					<p class="text-center to-animate"><a href="#" class="js-gotop">Go To Top</a></p>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 text-center">
					<ul class="fh5co-social">
						<li class="to-animate-2"><a href="#"><i class="icon-facebook"></i></a></li>
						<li class="to-animate-2"><a href="#"><i class="icon-twitter"></i></a></li>
						<li class="to-animate-2"><a href="#"><i class="icon-instagram"></i></a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<div>
	<p id="test"></p>
	</div>
	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Bootstrap DateTimePicker -->
	<script src="js/moment.js"></script>
	<script src="js/bootstrap-datetimepicker.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Stellar Parallax -->
	<script src="js/jquery.stellar.min.js"></script>

	<!-- Flexslider -->
	<script src="js/jquery.flexslider-min.js"></script>

	<!-- Main JS -->
	<script src="js/main.js"></script>
	<script>
		$(function () {
	       $('#date').datetimepicker();
	   });
	</script>
	<script>
		var modal = document.getElementById('id01');

		window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
		}
	</script>
	<script>
		var modal = document.getElementById('id02');

		window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
		}
	</script>
	<script>
		function val(){
			
			password=document.getElementById("psw").value;
			username=document.getElementById("uname").value;
			$.ajax({
					type: 'post',
					url: 'login.php',
					data: {userid: username, passcode: password},
					dataType: 'json',
					success: function (data) {
                        console.log(data);
                        if(data.text == "Successfully Logged in!"){
                        	alert(data.text);
                        	document.getElementById('id01').style.display = "none";
							var menu2 = document.getElementById('menu-2');
							menu2.innerHTML = menu2.innerHTML + '<a href="#" data-nav-section="user_profile" id="upmenu">User Profile</a>';
							document.getElementById('fh5co-contact').style.visibility = "visible";
							is_login = "yes";
							document.getElementById('userid').innerHTML = document.getElementById('userid').innerHTML + username;
							document.getElementById('btnlogin').style.display = "none";
							document.getElementById('btnregister').style.display = "none";
							var welcomeinfo = "Welcome, " + username + "!";
							document.getElementById('guestinfo').innerHTML = welcomeinfo;
							document.getElementById('guestinfo').style.color = "white";
							$.ajax({
								type: 'post',
								url: 'selectprofile.php',
								data: {userid: username},
								dataType: 'json',
								success: function (data) {
			                        console.log(data);
			                        var result = data.content;
                         			console.log(result);
                         			if (result[0][0] != null){
                         				document.getElementById('uaddress').innerHTML = "Address: " + result[0][0];
                         			}
                         			if (result[0][1] != null){
                         				document.getElementById('uphone').innerHTML = "Phone: " + result[0][1];
                         			}
                         			if (result[0][2] != null){
                         				document.getElementById('ucard').innerHTML = "Cardnumber: " + result[0][2];
                         			}
                         			if (result[0][3] != null){
                         				document.getElementById('uwallet').innerHTML = "Wallet: " + result[0][3];
                         			}

			                    },
			                    error: function (data) {
			                        alert("Error!");
			                        console.log(data);
			                    }
							});
                        }
                        else {
                        	alert(data.text);
                        }
                    },
                    error: function (data) {
                        alert("Error!");
                        console.log(data);
                    }
			});
			
        } 
        
    
		function checkandregister() { 
		    pwd1 = document.getElementById('pwd1').value;
		    pwd2 = document.getElementById('pwd2').value; 
			if(pwd1 != pwd2) {  
				alert("Please check your password!")  
				document.getElementById('pwd1').value = "";  
				document.getElementById('pwd2').value = "";  
			}
			else {
				$.ajax({
					type: 'post',
					url: 'register.php',
					data: {userid: document.getElementById('newuser').value, passcode: pwd1},
					dataType: 'json',
					success: function (data) {
                        alert(data.text);
                        console.log(data);
                    },
                    error: function (data) {
                        alert("Error!");
                        console.log(data);
                    }
				});
		    }
		}

		function updateprofile(){
			var address = document.getElementById('address').value;
			var phone = document.getElementById('phone').value;
			var cardnumber = document.getElementById('cardnumber').value;
			var wallet = document.getElementById('wallet').value;
			$.ajax({
					type: 'post',
					url: 'updateprofile.php',
					data: {userid: username, addressval: address, phoneval: parseInt(phone), cardnumberval: parseInt(cardnumber), walletval: parseInt(wallet)},
					dataType: 'json',
					success: function (data) {
                        alert(data.text);
                        document.getElementById('uaddress').innerHTML = "Address: " + address;
						document.getElementById('uphone').innerHTML = "Phone: " + phone;
						document.getElementById('ucard').innerHTML = "Cardnumber: " + cardnumber;
						document.getElementById('uwallet').innerHTML = "walletval: " + wallet;
                        console.log(data);
                    },
                    error: function (data) {
                        alert("Error!");
                        console.log(data);
                    }
				});
			document.getElementById('address').innerHTML = '';
			document.getElementById('phone').innerHTML = '';
			document.getElementById('cardnumber').innerHTML = '';
			document.getElementById('wallet').innerHTML = '';

		}  
		tot_num = 0;
		price = [17.5,7.99,12.99,12.99,17.5,7.99,12.99,12.99];
		food_name = ["Pineapple Juice","Green Juice","Soft Drinks","Carlo Rosee Drinks","Beef Steak","Tomato with Chicken","Sausages from Italy","Beef Grilled"];
		function ch_num_f(food_num,type){
			var tot_ele = "tot_price";
			var tot = document.getElementById(tot_ele).innerHTML;
			tot=tot.slice(14);
			tot_num=parseFloat(tot);
			tot_msg = "Total price: $";
			
			
			var ele = "f"+food_num;
			var x=document.getElementById(ele).innerHTML;
			if(type == 0){
				x=parseInt(x)+1;
				//num_f[parseInt(food_num)] = num_f[parseInt(food_num)] +1;
				tot_num = tot_num.toFixed(2);
				tot_num = parseFloat(tot_num);
				tot_num = tot_num + price[parseInt(food_num)];
				tot_num = tot_num.toFixed(2);
			}
			if(type == 1 && parseInt(x)>0){
				x=parseInt(x)-1;
				//num_f[parseInt(food_num)] = num_f[parseInt(food_num)] -1;
				tot_num = tot_num.toFixed(2);
				tot_num = parseFloat(tot_num);
				tot_num = tot_num - price[parseInt(food_num)];		
				tot_num = tot_num.toFixed(2);
			}
			document.getElementById(ele).innerHTML=x;
			document.getElementById(tot_ele).innerHTML=tot_msg+tot_num;
		}
		has_tab =[0,0,0,0,0,0,0,0,0];
		num_f = [0,0,0,0,0,0,0,0];
		function shop_cart(){
			for(var i = 0; i <8; i++){
            	var fid = "f" + i;
            	num_f[i] = parseInt(document.getElementById(fid).innerHTML);
			}
			
			document.getElementById('spc_light').style.display='block';
			var fee = parseFloat(tot_num);
			document.getElementById("tot_price_cart").innerHTML="Total price: $"+fee;
			var tab = document.getElementById("mytable");
			for(var i=0;i<=7;i++){
				if((num_f[i]>0)&&(has_tab[i]==0)){
					var oTr = document.getElementById("mytable").insertRow(-1);
					oTr.id="ftab"+i;
					var aText = new Array();
					aText[0] = document.createTextNode(food_name[i]);
					var num = num_f[i]+'';
					aText[1] = document.createTextNode(num);
					var ppp = num_f[i]*price[i];
					aText[2] = document.createTextNode(ppp.toFixed(2));
					for(var index=0;index<3;index++){
						var oTd = oTr.insertCell(index);
						oTd.appendChild(aText[index]);
					}
					has_tab[i]=1;
					continue;
				}
				else if((num_f[i]>0)&&(has_tab[i]==1)){
					var tr=document.getElementById('ftab'+i);
					tr.cells[1].innerHTML=num_f[i];
					tr.cells[2].innerHTML= (num_f[i]*price[i]).toFixed(2);
					continue;
				}
				else if((num_f[i]==0)&&(has_tab[i]==1)){
					var tr=document.getElementById('ftab'+i);
					tab.deleteRow(tr.rowIndex);
					has_tab[i]=0;
					continue;
				}
				else{
					continue;
				}
			}
		}



		function submit_order(){
			$.ajax({
					type: 'post',
					url: 'order.php',
					data: {userid: username, total_price: parseFloat(tot_num), ordercontent: JSON.stringify(num_f)},
					dataType: 'json',
					success: function (data) {
                        alert(data.text);
                        console.log(data);
                        if (data.text = "Successfully Ordered!"){
                        	document.getElementById('spc_light').style.display='none'
                        	tot_num = 0;
			                num_f = [0,0,0,0,0,0,0,0];
			                for(var i = 0; i <8; i++){
			                	var fid = "f" + i;
			                	document.getElementById(fid).innerHTML = '0';
			                }
			                document.getElementById('tot_price').innerHTML="Total price: $"+tot_num;
                        }
                    },
                    error: function (data) {
                        alert("Error!");
                        console.log(data);
                    }
				});

		}

		 function updatesp(addid){
		 	var orderidval = parseInt(addid.slice(5));
		 	tot_num = 0;
			num_f = [0,0,0,0,0,0,0,0];
			for(var i = 0; i <8; i++){
            	var fid = "f" + i;
            	document.getElementById(fid).innerHTML = '0';
            }
            document.getElementById('tot_price').innerHTML="Total price: $"+tot_num;
        	$.ajax({
					type: 'post',
					url: 'previousorder.php',
					data: {orderid: orderidval},
					dataType: 'json',
					success: function (data) {
                        alert("Check your menu before submmit the order!");
                        console.log(data);
                        var result = data.content;
                        
			        	console.log(result);
			        	for (var i = 0; i < result.length; i++){
			        		var index = food_name.indexOf(result[i][0]);
			        		console.log(index);
			        		var fid = 'f' + index;
			        		document.getElementById(fid).innerHTML = result[i][1];
							tot_num = parseFloat(tot_num);
			        		tot_num = tot_num+parseInt(result[i][1]) * price[index];
			        		tot_num = tot_num.toFixed(2);
			        	} 
			        	document.getElementById('tot_price').innerHTML="Total price: $"+tot_num;
                    },
                    error: function (data) {
                        alert("Error!");
                        console.log(data);
                    }
				});
 
        }

        function updatepreorder(){
        	$.ajax({
					type: 'post',
					url: 'updatepreorders.php',
					data: {userid: username},
					dataType: 'json',
					success: function (data) {
                        console.log(data);
                        preorder = JSON.parse(data.preorder);
						console.log(preorder);
						for (var i = 0; i < preorder.length; i++){
							var addid = "addid" + preorder[i];
							if (document.getElementById(addid) == null){
								var previous = document.getElementById('previous'); 
								var oneorder = document.createElement('a');
								oneorder.setAttribute('href', 'javascript:void(0)');
								oneorder.setAttribute('id', addid);
								oneorder.setAttribute('onclick', 'updatesp(this.id);');
								oneorder.innerHTML = preorder[i][0] + ": " + preorder[i][1] + "; ";
								previous.appendChild(oneorder);
							}
						}
                    },
                    error: function (data) {
                        alert("Error!");
                        console.log(data);
                    }
				});
        }	

	</script> 
	</body>
</html>

